#----------- Vectores
uno_ <- c(1,2,3,4,5)
dos_ <- c(2,4,6,8,10)
tres_ <- c(3,6,9,12,15)
#----------- Matricez
data <- matrix(c (uno_, dos_, tres_),nrow = 3,ncol = 5)
data
rownames(data) <- c('uno','dos','tre')
data
colnames(data) <- c('primera','segunda','tercera','cuarta','quinta')
data
data[1,1]
data['tre','quinta']
data['uno',]
#----------- Factores
tayas <- c('ch','m','g','CH','ch','ch','m','m','M','M','m','m','m','m','G','g','g','g','g')
ftaya <- factor(tayas,
ordered = TRUE,
levels = c('ch','CH','m','M','g','G'),
labels = c('CH','CH','M','M','G','G')
)
plot(ftaya)
#----------- DataFrame
df <- data.frame(uno_,dos_,tres_)
df
names(df) <- c('UNO','DOS','TRES')
df
df[1,1]
df[c(2,2),c(1,1)]
df[1,]
df[,1]
df$TRES
order(df$TRES)
orden <- order(df$TRES, decreasing = TRUE)
df[orden,]
#----------- Listas
lista <- list(data,uno_)
lista
lista[['vector']][2]
lista[['uno_']][2]
lista[['vector']]
#----------- Vectores
uno_ <- c(1,2,3,4,5)
#----------- Matricez
data <- matrix(c (uno_, dos_, tres_),nrow = 3,ncol = 5)
dos_ <- c(2,4,6,8,10)
tres_ <- c(3,6,9,12,15)
#----------- Matricez
data <- matrix(c (uno_, dos_, tres_),nrow = 3,ncol = 5)
rownames(data) <- c('uno','dos','tre')
colnames(data) <- c('primera','segunda','tercera','cuarta','quinta')
#----------- Listas
lista <- list(data,uno_)
lista
lista[['vector']]
lista[['data']]
lista[[1]]
lista[[1]][1,1]
n <- 1
lista[['n']] <- n
lista
lista[['n']] <- NULL
lista
install.packages("ggplot2")
install.packages("readr")
library(readr)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok <- "9999-99-99"
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- as.Date(df$FECHA_DEF, format = "%Y-%m-%d", errors = "coerce")
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
setwd("C:/Users/jurie/Documents/Data/Covid")
#-------------------------------------------------------- OR
new_csv(0)
library(readr)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- as.Date("9999-12-27")
date_def_nok <- as.Date("9999-99-99")
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- as.Date(df$FECHA_DEF, format = "%Y-%m-%d", errors = "coerce")
problems_df <- problems(df)
if (nrow(problems_df) > 0) {
print(problems_df)
}
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
#-------------------------------------------------------- OR
new_csv(0)
library(readr)
library(anytime)
install.packages("anytime")
library(readr)
library(anytime)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- as.Date("9999-12-27")
date_def_nok <- as.Date("9999-99-99")
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- anytime::anydate(df$FECHA_DEF)
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
#-------------------------------------------------------- OR
new_csv(0)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok <- "9999-99-99"
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- as.Date(df$FECHA_DEF, format = "%Y-%m-%d", errors = "coerce")
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
new_csv(0)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- '9999-12-27'
date_def_nok <- '9999-99-99'
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- as.Date(df$FECHA_DEF, format = "%Y-%m-%d", errors = "coerce")
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
new_csv(0)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- 9999-12-27
date_def_nok <- 9999-99-99
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- as.Date(df$FECHA_DEF, format = "%Y-%m-%d", errors = "coerce")
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
new_csv(0)
library(readr)
library(vroom)
install.packages("vroom")
library(readr)
library(vroom)
library(vroom)
library(readr)
library(anytime)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD', 'HABLA_LENGUA_INDIG', 'INDIGENA', 'TOMA_MUESTRA_LAB', 'RESULTADO_LAB',
'ORIGEN', 'MIGRANTE', 'PAIS_NACIONALIDAD', 'PAIS_ORIGEN', 'UCI', 'ID_REGISTRO', 'CLASIFICACION_FINAL',
'ENTIDAD_UM', 'ENTIDAD_NAC', 'MUNICIPIO_RES', 'FECHA_SINTOMAS', 'EMBARAZO',
'DIABETES', 'INMUSUPR', 'OBESIDAD', 'RENAL_CRONICA', 'TABAQUISMO', 'OTRO_CASO')
name <- paste0('COVID19MEXICO202', as.character(i), '.csv')
new_name <- paste0('COVID19MEXICO202', as.character(i), '_PART.csv')
date_def_ok <- as.Date("9999-12-27")
date_def_nok <- as.Date("9999-99-99")
dfo <- read_csv(name)
dfo <- dfo[, -which(names(dfo) %in% n_necessary)]
rows_to_keep <- seq(1, nrow(dfo), by = 3)
df <- dfo[rows_to_keep, ]
rm(dfo)
gc()
df$FECHA_DEF <- anytime::anydate(df$FECHA_DEF)
problems_df <- problems(df)
if (nrow(problems_df) > 0) {
print(problems_df)
}
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
write_csv(df, new_name)
rm(name, new_name, df, n_necessary, date_def_ok, date_def_nok)
gc()
}
new_csv(0)
print(unique(df$FECHA_DEF))
dfo <- read
dfo <- read_csv('COVID19MEXICO2023.csv')
print(unique(df$FECHA_DEF))
print(unique(df$FECHA_DEF))
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok<- "9999-99-99"
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
df          <- dfo[rownames(df) %% 3 == 0, ]
df          <- dfo[rownames(dfo) %% 3 == 0, ]
print(dfo[rownames(dfo)])
print(dfo[colnames(dfo)])
print(dfo[colnames(dfo)][0])
print(dfo[colnames(dfo)][0:10])
print(dfo[colnames(dfo)][1000:1010])
print(dfo[rownames(dfo)][1000:1010])
namesrow <- rownames(dfo)
print(namesrow[2])
df          <- dfo[rownames(dfo) %% 3 == 0]
df          <- dfo[as.numeric(rownames(dfo)) %% 3 == 0]
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok<- "9999-99-99"
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
namesrow    <- rownames(dfo)
df          <- dfo[as.numeric(namesrow) %% 3 == 0]
test <- c("1","2","3","4","5","6","7","8","9","10")
seq <- seq(0, 10, by = 2)
test2 <- test[seq]
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok<- "9999-99-99"
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq]
#
seq <- indices <- seq(0, 10, by = 2)
test <- c('1','2','3','4','5','6','7','8','9','10',)
test <- c('1','2','3','4','5','6','7','8','9','10')
df          <- dfo[seq, , drop = FALSE]
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- "9999-12-27"
date_def_nok<- "9999-99-99"
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[df$FECHA_DEF == date_def_nok] <- date_def_ok
class(df$FECHA_DEF[1])
date_def_ok <- as.Date("9999-12-27")
date_def_nok<- as.Date("9999-99-99")
class(date_def_ok)
class(date_def_nok)
t<-unique(df$FECHA_DEF[1])
t<-unique(df$FECHA_DEF)
print(t)
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
date_def_nok<-
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(new_name)
rm(df)
rm(n_necessary)
rm(date_def_ok)
rm(date_def_nok)
gc()
rm(seq)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(new_name)
rm(df)
rm(n_necessary)
rm(date_def_ok)
rm(date_def_nok)
rm(seq)
gc()
}
for (i in 0:3){
new_csv(i)
}
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(new_name)
rm(df)
rm(n_necessary)
rm(date_def_ok)
rm(date_def_nok)
rm(seq)
gc()
write_csv(df,new_name)
}
new_csv(0)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(n_necessary)
rm(date_def_ok)
rm(seq)
gc()
write_csv(df,new_name)
rm(df)
rm(new_name)
}
new_csv(0)
new_csv(1)
new_csv(2)
new_csv(3)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(3),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(3),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(n_necessary)
rm(date_def_ok)
rm(seq)
gc()
write_csv(df,new_name)
rm(df)
rm(new_name)
}
#-------------------------------------------------------- OR
new_csv(0)
new_csv <- function(i) {
n_necessary <- c('NACIONALIDAD','HABLA_LENGUA_INDIG','INDIGENA','TOMA_MUESTRA_LAB','RESULTADO_LAB',
'ORIGEN','MIGRANTE','PAIS_NACIONALIDAD','PAIS_ORIGEN','UCI','ID_REGISTRO','CLASIFICACION_FINAL',
'ENTIDAD_UM','ENTIDAD_NAC','MUNICIPIO_RES','FECHA_SINTOMAS','EMBARAZO',
'DIABETES','INMUSUPR','OBESIDAD','RENAL_CRONICA','TABAQUISMO','OTRO_CASO')
name        <- paste0('COVID19MEXICO202',as.character(i),'.csv')
new_name    <- paste0('COVID19MEXICO202',as.character(i),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
dfo         <- read_csv(name)
dfo         <- dfo[, -which(names(dfo) %in% n_necessary)]
seq         <- seq(0, nrow(dfo), by = 3)
df          <- dfo[seq, , drop = FALSE]
rm(dfo)
gc()
df$FECHA_DEF[is.na(df$FECHA_DEF)] <- date_def_ok
rm(name)
rm(n_necessary)
rm(date_def_ok)
rm(seq)
gc()
write_csv(df,new_name)
rm(df)
rm(new_name)
}
new_csv(0)
new_csv(1)
new_csv(2)
new_csv(3)
change_fields <- function(i){
name        <- paste0('COVID19MEXICO202',as.character(i),'_PART.csv')
date_def_ok <- as.Date("9999-12-27")
df          <- read_csv(name)
df$DEF      <- ifelse(df$FECHA_DEF == date_def_ok, 0, 1)
write_csv(df,name)
rm(name)
rm(date_def_ok)
rm(df)
}
#-------------------------------------------------------- OR
change_fields(0)
change_fields(1)
change_fields(2)
change_fields(3)
